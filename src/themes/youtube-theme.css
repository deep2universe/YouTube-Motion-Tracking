/* ============================================
   YouTube Halloween Theme - Main Styles
   ============================================ */

/* ============================================
   A) Page Background
   ============================================ */
body.halloween-theme ytd-app {
  background: var(--halloween-gradient-bg) !important;
  position: relative;
}

/* Atmospheric overlay effect */
body.halloween-theme ytd-app::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: radial-gradient(
    circle at 20% 50%,
    rgba(139, 0, 255, 0.1) 0%,
    transparent 50%
  ),
  radial-gradient(
    circle at 80% 50%,
    rgba(255, 102, 0, 0.1) 0%,
    transparent 50%
  );
  pointer-events: none;
  z-index: 0;
}

/* ============================================
   B) Header / Masthead
   ============================================ */
body.halloween-theme #masthead-container,
body.halloween-theme ytd-masthead {
  background: var(--halloween-gradient-header) !important;
  border-bottom: 2px solid var(--halloween-border-primary) !important;
  box-shadow: 0 2px var(--halloween-shadow-medium) var(--halloween-glow-primary) !important;
}

/* YouTube Logo */
body.halloween-theme #logo,
body.halloween-theme ytd-logo {
  filter: hue-rotate(20deg) drop-shadow(0 0 10px var(--halloween-primary));
  transition: filter var(--halloween-transition-normal) ease;
}

body.halloween-theme #logo:hover,
body.halloween-theme ytd-logo:hover {
  filter: hue-rotate(20deg) drop-shadow(0 0 20px var(--halloween-primary));
}

/* Search Box */
body.halloween-theme #search-form,
body.halloween-theme #search-input,
body.halloween-theme #search {
  background: var(--halloween-bg-dark) !important;
  border: 1px solid var(--halloween-border-secondary) !important;
  transition: border-color var(--halloween-transition-normal) ease,
              box-shadow var(--halloween-transition-normal) ease;
}

body.halloween-theme #search-form:focus-within,
body.halloween-theme #search-input:focus,
body.halloween-theme #search:focus {
  border-color: var(--halloween-border-primary) !important;
  box-shadow: 0 0 15px var(--halloween-glow-primary) !important;
}

/* Search input text */
body.halloween-theme #search-input input,
body.halloween-theme #search input {
  color: var(--halloween-text-body) !important;
}

/* Header Icons */
body.halloween-theme #masthead ytd-topbar-menu-button-renderer button,
body.halloween-theme #masthead yt-icon-button,
body.halloween-theme #masthead ytd-notification-topbar-button-renderer {
  transition: filter var(--halloween-transition-normal) ease;
}

body.halloween-theme #masthead ytd-topbar-menu-button-renderer button:hover,
body.halloween-theme #masthead yt-icon-button:hover,
body.halloween-theme #masthead ytd-notification-topbar-button-renderer:hover {
  filter: drop-shadow(0 0 8px var(--halloween-primary));
}

/* ============================================
   C) Sidebar / Guide
   ============================================ */
body.halloween-theme #guide,
body.halloween-theme ytd-guide-renderer,
body.halloween-theme #guide-inner-content {
  background: var(--halloween-gradient-sidebar) !important;
  border-right: 2px solid var(--halloween-border-primary) !important;
}

/* Sidebar Items */
body.halloween-theme ytd-guide-entry-renderer,
body.halloween-theme ytd-guide-collapsible-entry-renderer {
  transition: box-shadow var(--halloween-transition-normal) ease,
              border-left var(--halloween-transition-normal) ease;
}

body.halloween-theme ytd-guide-entry-renderer:hover,
body.halloween-theme ytd-guide-collapsible-entry-renderer:hover {
  box-shadow: 0 0 15px var(--halloween-glow-primary);
  border-left: 3px solid var(--halloween-border-primary) !important;
}

/* Active Sidebar Item */
body.halloween-theme ytd-guide-entry-renderer[active],
body.halloween-theme ytd-guide-entry-renderer.iron-selected {
  border-left: 3px solid var(--halloween-border-secondary) !important;
  background: var(--halloween-bg-light) !important;
}

/* Sidebar Icons */
body.halloween-theme ytd-guide-entry-renderer yt-icon,
body.halloween-theme ytd-guide-collapsible-entry-renderer yt-icon {
  filter: hue-rotate(20deg) drop-shadow(0 0 5px rgba(255, 102, 0, 0.3));
}

/* Sidebar Text */
body.halloween-theme ytd-guide-entry-renderer yt-formatted-string,
body.halloween-theme ytd-guide-collapsible-entry-renderer yt-formatted-string {
  color: var(--halloween-text-body) !important;
}

/* ============================================
   D) Video Player
   ============================================ */
body.halloween-theme #movie_player,
body.halloween-theme .html5-video-player {
  border: 3px solid var(--halloween-border-primary) !important;
  box-shadow: 0 0 var(--halloween-shadow-large) var(--halloween-glow-primary),
              0 0 var(--halloween-shadow-large) var(--halloween-glow-secondary) !important;
  border-radius: 4px;
}

/* Player Controls Bar */
body.halloween-theme .ytp-chrome-bottom {
  background: linear-gradient(
    180deg,
    transparent 0%,
    var(--halloween-bg-dark) 30%
  ) !important;
}

/* Progress Bar */
body.halloween-theme .ytp-progress-bar-container,
body.halloween-theme .ytp-progress-bar {
  transition: height var(--halloween-transition-fast) ease;
}

body.halloween-theme .ytp-play-progress,
body.halloween-theme .ytp-scrubber-button {
  background: var(--halloween-primary) !important;
  box-shadow: 0 0 10px var(--halloween-glow-primary);
}

body.halloween-theme .ytp-load-progress {
  background: rgba(255, 102, 0, 0.3) !important;
}

/* Volume Slider */
body.halloween-theme .ytp-volume-slider-handle {
  background: var(--halloween-primary) !important;
  box-shadow: 0 0 8px var(--halloween-glow-primary);
}

body.halloween-theme .ytp-volume-slider-handle::before {
  background: var(--halloween-primary) !important;
}

/* Player Buttons */
body.halloween-theme .ytp-button {
  transition: filter var(--halloween-transition-normal) ease;
}

body.halloween-theme .ytp-button:hover {
  filter: drop-shadow(0 0 8px var(--halloween-primary));
}

/* ============================================
   E) Video Thumbnails / Feed
   ============================================ */
body.halloween-theme ytd-thumbnail,
body.halloween-theme ytd-video-renderer,
body.halloween-theme ytd-grid-video-renderer,
body.halloween-theme ytd-compact-video-renderer,
body.halloween-theme ytd-rich-item-renderer {
  background: var(--halloween-bg-light) !important;
  border: 1px solid var(--halloween-border-secondary) !important;
  border-radius: 8px;
  transition: transform var(--halloween-transition-normal) ease,
              border-color var(--halloween-transition-normal) ease,
              box-shadow var(--halloween-transition-normal) ease;
}

body.halloween-theme ytd-thumbnail:hover,
body.halloween-theme ytd-video-renderer:hover,
body.halloween-theme ytd-grid-video-renderer:hover,
body.halloween-theme ytd-compact-video-renderer:hover,
body.halloween-theme ytd-rich-item-renderer:hover {
  transform: translateY(-4px);
  border-color: var(--halloween-border-primary) !important;
  box-shadow: 0 4px var(--halloween-shadow-medium) var(--halloween-glow-primary),
              0 0 var(--halloween-shadow-small) var(--halloween-glow-secondary);
}

/* Thumbnail Image */
body.halloween-theme ytd-thumbnail img,
body.halloween-theme yt-image img {
  transition: transform var(--halloween-transition-normal) ease;
}

body.halloween-theme ytd-thumbnail:hover img,
body.halloween-theme yt-image:hover img {
  transform: scale(1.05);
}

/* Thumbnail Overlay on Hover */
body.halloween-theme ytd-thumbnail::after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: var(--halloween-gradient-thumbnail-hover);
  opacity: 0;
  transition: opacity var(--halloween-transition-normal) ease;
  pointer-events: none;
  border-radius: 8px;
}

body.halloween-theme ytd-thumbnail:hover::after {
  opacity: 1;
}

/* Video Title */
body.halloween-theme #video-title,
body.halloween-theme yt-formatted-string#video-title {
  color: var(--halloween-text-primary) !important;
  text-shadow: 0 0 8px rgba(255, 215, 0, 0.5);
  transition: text-shadow var(--halloween-transition-normal) ease;
}

body.halloween-theme #video-title:hover,
body.halloween-theme yt-formatted-string#video-title:hover {
  text-shadow: 0 0 12px rgba(255, 215, 0, 0.8);
}

/* Channel Name */
body.halloween-theme #channel-name,
body.halloween-theme ytd-channel-name a,
body.halloween-theme yt-formatted-string.ytd-channel-name {
  color: var(--halloween-text-secondary) !important;
  transition: color var(--halloween-transition-normal) ease;
}

body.halloween-theme #channel-name:hover,
body.halloween-theme ytd-channel-name a:hover {
  color: var(--halloween-primary) !important;
}

/* Video Metadata */
body.halloween-theme #metadata-line,
body.halloween-theme ytd-video-meta-block {
  color: var(--halloween-text-muted) !important;
}

/* ============================================
   F) Comments Section
   ============================================ */
body.halloween-theme ytd-comments,
body.halloween-theme #comments {
  background: var(--halloween-bg-medium) !important;
  border-top: 2px solid var(--halloween-border-primary) !important;
  border-radius: 8px;
  padding: 16px;
}

/* Comment Items */
body.halloween-theme ytd-comment-thread-renderer,
body.halloween-theme ytd-comment-renderer {
  background: var(--halloween-bg-light) !important;
  border-radius: 8px;
  padding: 12px;
  margin-bottom: 8px;
  transition: border-left var(--halloween-transition-normal) ease;
}

body.halloween-theme ytd-comment-thread-renderer:hover,
body.halloween-theme ytd-comment-renderer:hover {
  border-left: 3px solid var(--halloween-border-secondary) !important;
}

/* Comment Author */
body.halloween-theme #author-text,
body.halloween-theme ytd-comment-renderer #author-text {
  color: var(--halloween-text-secondary) !important;
  text-shadow: 0 0 5px rgba(255, 140, 0, 0.4);
  font-weight: 600;
}

/* Comment Text */
body.halloween-theme #content-text,
body.halloween-theme ytd-comment-renderer #content-text,
body.halloween-theme yt-formatted-string#content-text {
  color: var(--halloween-text-body) !important;
}

/* Comment Header */
body.halloween-theme #header-author,
body.halloween-theme ytd-comment-renderer #header-author {
  color: var(--halloween-text-body) !important;
}

/* ============================================
   G) Scrollbar
   ============================================ */
body.halloween-theme ::-webkit-scrollbar {
  width: 12px;
  height: 12px;
}

body.halloween-theme ::-webkit-scrollbar-track {
  background: var(--halloween-bg-dark);
  border: 1px solid var(--halloween-border-secondary);
  border-radius: 6px;
}

body.halloween-theme ::-webkit-scrollbar-thumb {
  background: var(--halloween-gradient-scrollbar);
  border-radius: 6px;
  transition: box-shadow var(--halloween-transition-normal) ease;
}

body.halloween-theme ::-webkit-scrollbar-thumb:hover {
  background: linear-gradient(
    180deg,
    var(--halloween-primary) 0%,
    var(--halloween-secondary) 100%
  );
  box-shadow: 0 0 10px var(--halloween-glow-primary);
}

/* ============================================
   H) Buttons and Interactive Elements
   ============================================ */

/* Subscribe Button */
body.halloween-theme ytd-subscribe-button-renderer button,
body.halloween-theme ytd-button-renderer button {
  background: var(--halloween-gradient-button-inactive) !important;
  border: 1px solid var(--halloween-border-secondary) !important;
  color: var(--halloween-text-body) !important;
  transition: background var(--halloween-transition-normal) ease,
              box-shadow var(--halloween-transition-normal) ease;
}

body.halloween-theme ytd-subscribe-button-renderer button:hover,
body.halloween-theme ytd-button-renderer button:hover {
  background: var(--halloween-gradient-button-active) !important;
  box-shadow: 0 0 15px var(--halloween-glow-primary);
}

/* Chips / Filter Buttons */
body.halloween-theme yt-chip-cloud-chip-renderer,
body.halloween-theme ytd-chip-cloud-chip-renderer {
  background: var(--halloween-bg-medium) !important;
  border: 1px solid var(--halloween-border-secondary) !important;
  color: var(--halloween-text-body) !important;
  transition: border-color var(--halloween-transition-normal) ease,
              box-shadow var(--halloween-transition-normal) ease;
}

body.halloween-theme yt-chip-cloud-chip-renderer:hover,
body.halloween-theme ytd-chip-cloud-chip-renderer:hover {
  border-color: var(--halloween-border-primary) !important;
  box-shadow: 0 0 10px var(--halloween-glow-primary);
}

body.halloween-theme yt-chip-cloud-chip-renderer[chip-style="STYLE_PRIMARY"],
body.halloween-theme ytd-chip-cloud-chip-renderer[chip-style="STYLE_PRIMARY"] {
  background: var(--halloween-gradient-button-active) !important;
  border-color: var(--halloween-border-primary) !important;
}

/* General Buttons */
body.halloween-theme button,
body.halloween-theme yt-button-renderer button,
body.halloween-theme paper-button {
  transition: filter var(--halloween-transition-normal) ease;
}

body.halloween-theme button:hover,
body.halloween-theme yt-button-renderer button:hover,
body.halloween-theme paper-button:hover {
  filter: drop-shadow(0 0 8px var(--halloween-primary));
}

/* Like/Dislike Buttons */
body.halloween-theme ytd-toggle-button-renderer button,
body.halloween-theme ytd-segmented-like-dislike-button-renderer button {
  transition: filter var(--halloween-transition-normal) ease;
}

body.halloween-theme ytd-toggle-button-renderer button:hover,
body.halloween-theme ytd-segmented-like-dislike-button-renderer button:hover {
  filter: drop-shadow(0 0 8px var(--halloween-primary));
}

/* ============================================
   Additional UI Elements
   ============================================ */

/* Description Box */
body.halloween-theme ytd-video-secondary-info-renderer,
body.halloween-theme ytd-expander {
  background: var(--halloween-bg-light) !important;
  border: 1px solid var(--halloween-border-secondary) !important;
  border-radius: 8px;
}

/* Playlist Items */
body.halloween-theme ytd-playlist-panel-renderer {
  background: var(--halloween-bg-medium) !important;
  border: 1px solid var(--halloween-border-secondary) !important;
}

/* Search Results */
body.halloween-theme ytd-search ytd-item-section-renderer {
  background: transparent !important;
}

/* Channel Header */
body.halloween-theme ytd-c4-tabbed-header-renderer {
  background: var(--halloween-gradient-header) !important;
  border-bottom: 2px solid var(--halloween-border-primary) !important;
}

/* Notification Badge */
body.halloween-theme yt-notification-topbar-button-renderer .yt-spec-icon-badge-shape__badge {
  background: var(--halloween-primary) !important;
  box-shadow: 0 0 8px var(--halloween-glow-primary);
}

/* Focus Indicators for Accessibility */
body.halloween-theme button:focus-visible,
body.halloween-theme a:focus-visible,
body.halloween-theme input:focus-visible {
  outline: 2px solid var(--halloween-accent) !important;
  outline-offset: 2px;
}


/* ============================================
   TEXT READABILITY FIXES
   ============================================ */

/* Global text color override for all elements */
body.halloween-theme,
body.halloween-theme * {
  color: var(--halloween-text-body) !important;
}

/* Ensure all text elements are readable */
body.halloween-theme ytd-app,
body.halloween-theme ytd-page-manager,
body.halloween-theme #content,
body.halloween-theme #primary,
body.halloween-theme #secondary {
  color: var(--halloween-text-body) !important;
}

/* Video renderer text elements */
body.halloween-theme ytd-video-renderer *,
body.halloween-theme ytd-grid-video-renderer *,
body.halloween-theme ytd-compact-video-renderer *,
body.halloween-theme ytd-rich-item-renderer * {
  color: var(--halloween-text-body) !important;
}

/* Playlist panel text */
body.halloween-theme ytd-playlist-panel-renderer,
body.halloween-theme ytd-playlist-panel-renderer * {
  color: var(--halloween-text-body) !important;
  background: var(--halloween-bg-medium) !important;
}

body.halloween-theme ytd-playlist-panel-video-renderer {
  background: var(--halloween-bg-light) !important;
}

body.halloween-theme ytd-playlist-panel-video-renderer:hover {
  background: var(--halloween-bg-medium) !important;
}

/* Playlist panel title */
body.halloween-theme #publisher-container,
body.halloween-theme .publisher {
  color: var(--halloween-text-primary) !important;
}

/* Video metadata text */
body.halloween-theme #info,
body.halloween-theme #info *,
body.halloween-theme ytd-video-primary-info-renderer,
body.halloween-theme ytd-video-primary-info-renderer * {
  color: var(--halloween-text-body) !important;
}

/* Video description */
body.halloween-theme ytd-text-inline-expander,
body.halloween-theme ytd-text-inline-expander *,
body.halloween-theme #description,
body.halloween-theme #description * {
  color: var(--halloween-text-body) !important;
}

/* Secondary info (channel info below video) */
body.halloween-theme ytd-video-secondary-info-renderer *,
body.halloween-theme ytd-channel-name *,
body.halloween-theme #owner-sub-count {
  color: var(--halloween-text-body) !important;
}

/* Comment section header */
body.halloween-theme #comments #header,
body.halloween-theme ytd-comments-header-renderer,
body.halloween-theme ytd-comments-header-renderer * {
  color: var(--halloween-text-body) !important;
}

/* Comment input */
body.halloween-theme #simple-box,
body.halloween-theme #contenteditable-root {
  color: var(--halloween-text-body) !important;
  background: var(--halloween-bg-light) !important;
}

/* Comment action buttons */
body.halloween-theme ytd-comment-action-buttons-renderer,
body.halloween-theme ytd-comment-action-buttons-renderer * {
  color: var(--halloween-text-muted) !important;
}

/* Sidebar section headers */
body.halloween-theme #guide-section-title,
body.halloween-theme ytd-guide-section-renderer #guide-section-title {
  color: var(--halloween-text-primary) !important;
}

/* Search suggestions */
body.halloween-theme #search-suggestions,
body.halloween-theme ytd-search-suggestions,
body.halloween-theme ytd-search-suggestions * {
  color: var(--halloween-text-body) !important;
  background: var(--halloween-bg-dark) !important;
}

/* Dropdown menus */
body.halloween-theme ytd-menu-popup-renderer,
body.halloween-theme ytd-menu-popup-renderer *,
body.halloween-theme tp-yt-paper-listbox,
body.halloween-theme tp-yt-paper-listbox * {
  color: var(--halloween-text-body) !important;
  background: var(--halloween-bg-dark) !important;
}

body.halloween-theme ytd-menu-service-item-renderer:hover,
body.halloween-theme tp-yt-paper-item:hover {
  background: var(--halloween-bg-medium) !important;
}

/* Notification panel */
body.halloween-theme ytd-notification-renderer,
body.halloween-theme ytd-notification-renderer * {
  color: var(--halloween-text-body) !important;
  background: var(--halloween-bg-dark) !important;
}

/* Shorts shelf */
body.halloween-theme ytd-reel-shelf-renderer,
body.halloween-theme ytd-reel-shelf-renderer * {
  color: var(--halloween-text-body) !important;
}

/* Channel page elements */
body.halloween-theme ytd-channel-name,
body.halloween-theme #channel-header,
body.halloween-theme #channel-header * {
  color: var(--halloween-text-body) !important;
}

/* Tab headers */
body.halloween-theme tp-yt-paper-tab,
body.halloween-theme tp-yt-paper-tab * {
  color: var(--halloween-text-body) !important;
}

body.halloween-theme tp-yt-paper-tab[aria-selected="true"] {
  color: var(--halloween-text-primary) !important;
}

/* Video stats (views, date) */
body.halloween-theme #metadata,
body.halloween-theme #metadata *,
body.halloween-theme ytd-video-meta-block,
body.halloween-theme ytd-video-meta-block * {
  color: var(--halloween-text-muted) !important;
}

/* Ensure links are visible */
body.halloween-theme a,
body.halloween-theme a * {
  color: var(--halloween-text-secondary) !important;
}

body.halloween-theme a:hover,
body.halloween-theme a:hover * {
  color: var(--halloween-primary) !important;
}

/* Button text */
body.halloween-theme button,
body.halloween-theme button * {
  color: var(--halloween-text-body) !important;
}

/* Ensure icons remain visible */
body.halloween-theme yt-icon,
body.halloween-theme ytd-button-renderer yt-icon,
body.halloween-theme ytd-toggle-button-renderer yt-icon {
  color: var(--halloween-text-body) !important;
}

/* Time stamps and badges */
body.halloween-theme .badge,
body.halloween-theme ytd-badge-supported-renderer,
body.halloween-theme #time-status,
body.halloween-theme .ytd-thumbnail-overlay-time-status-renderer {
  color: #FFFFFF !important;
  background: rgba(0, 0, 0, 0.8) !important;
}

/* Ensure all headings are visible */
body.halloween-theme h1,
body.halloween-theme h2,
body.halloween-theme h3,
body.halloween-theme h4,
body.halloween-theme h5,
body.halloween-theme h6 {
  color: var(--halloween-text-primary) !important;
}

/* Ensure all paragraphs are visible */
body.halloween-theme p,
body.halloween-theme span,
body.halloween-theme div {
  color: var(--halloween-text-body) !important;
}

/* Override any dark text on dark background */
body.halloween-theme [style*="color: rgb(15"],
body.halloween-theme [style*="color: rgb(3,"],
body.halloween-theme [style*="color: #0"],
body.halloween-theme [style*="color: #1"],
body.halloween-theme [style*="color: #2"],
body.halloween-theme [style*="color: #3"] {
  color: var(--halloween-text-body) !important;
}

/* Playlist video count and stats */
body.halloween-theme #stats,
body.halloween-theme #stats * {
  color: var(--halloween-text-muted) !important;
}

/* Video owner info */
body.halloween-theme #owner,
body.halloween-theme #owner * {
  color: var(--halloween-text-body) !important;
}

/* Top-level menu items */
body.halloween-theme ytd-guide-entry-renderer #endpoint,
body.halloween-theme ytd-guide-entry-renderer #endpoint * {
  color: var(--halloween-text-body) !important;
}

/* Ensure all formatted strings are readable */
body.halloween-theme yt-formatted-string {
  color: var(--halloween-text-body) !important;
}

/* Special case: Keep video titles gold */
body.halloween-theme #video-title,
body.halloween-theme yt-formatted-string#video-title,
body.halloween-theme a#video-title {
  color: var(--halloween-text-primary) !important;
}

/* Special case: Keep channel names orange */
body.halloween-theme #channel-name,
body.halloween-theme #channel-name *,
body.halloween-theme ytd-channel-name a,
body.halloween-theme ytd-channel-name a * {
  color: var(--halloween-text-secondary) !important;
}

/* Special case: Keep comment authors orange */
body.halloween-theme #author-text,
body.halloween-theme #author-text * {
  color: var(--halloween-text-secondary) !important;
}

/* Ensure input fields have readable text */
body.halloween-theme input,
body.halloween-theme textarea {
  color: var(--halloween-text-body) !important;
  background: var(--halloween-bg-light) !important;
}

/* Placeholder text */
body.halloween-theme input::placeholder,
body.halloween-theme textarea::placeholder {
  color: var(--halloween-text-muted) !important;
}
